lib.tx_contrast.handler = USER_INT
lib.tx_contrast.handler {
	includeLibs = EXT:contrast/Classes/Handler.php
	userFunc = Tx_Contrast_Handler->execute
}

lib.tx_contrast.includer = USER
lib.tx_contrast.includer {
	includeLibs = EXT:contrast/Classes/Includer.php
	userFunc = Tx_Contrast_Includer->execute
	stylesheet = {$contrast.stylesheet}
	media = screen
}

lib.tx_contrast.isModule {
	value.field = module
	equals = contrast
}

lib.tx_contrast.link = TEXT
lib.tx_contrast.link {
	ifEmpty.data = LLL:EXT:contrast/Resources/Private/locallang.xml:linkTitle
	typolink {
		parameter.data = TSFE:id
		additionalParams.cObject = COA
		additionalParams.cObject {
			10 = TEXT
			10.value = &tx_contrast[toggle]=1
			20 = TEXT
			20.data = getIndpEnv:TYPO3_SITE_SCRIPT
			20.rawUrlEncode = 1
			20.wrap = &tx_contrast[toggle]=1&tx_contrast[url]=|
			30 = TEXT
			30.data = getIndpEnv:TYPO3_SITE_SCRIPT
			30.hash = md5
			30.wrap = &tx_contrast[urlHash]=|
		}
	}
	wrap = <span class="contrast-link">|</span>
}

lib.tx_contrast.menuLink {
	if < lib.tx_contrast.isModule
	typolink < lib.tx_contrast.link.typolink
	wrap < lib.tx_contrast.link.wrap
}

[globalVar = TSFE:fe_user|sesData|tx_contrast|enable = 1] OR [globalVar = GP:tx_contrast|toggle = 1]
{$contrast.pageObjectName} {
	headerData.999999 < lib.tx_contrast.includer
	999999 =< lib.tx_contrast.handler
}
[end]
